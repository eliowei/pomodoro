import{p as Z,m as ue,j as we,k as Pe,l as ee,d as I,q as te,f as l,v as X,x as Q,M as pe,I as ae,E as ie,y as Fe,z as Re,A as Se,B as Be,C as Te,D as $e,G as De,H as Oe,r as F,J as Ee,K as Le,L as Ae,N as We,O as Ue,P as Me,Q as Ne,F as O,R as J,S as Ke,T as je,U as qe,W as ze,X as He,Y as Xe,Z as Ye,_ as Ge,$ as ce,a0 as Je,s as Qe,e as Ze,w as T,i as et,o as D,a as v,a1 as fe,c as U,g as ve,h as q,a2 as tt,t as me,V as z}from"./index-K8_tQs9i.js";import{u as lt}from"./list-bPZVHaCx.js";import{b as he,V as H,a as nt}from"./route-block-lDR7V1jh.js";import{V as at,m as it,u as be,a as ot,b as rt,c as ge,d as ye}from"./VInput-D-N9R6Tp.js";class oe{constructor(r){let{x:i,y:o,width:t,height:n}=r;this.x=i,this.y=o,this.width=t,this.height=n}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function st(e){const r=e.getBoundingClientRect(),i=getComputedStyle(e),o=i.transform;if(o){let t,n,s,d,c;if(o.startsWith("matrix3d("))t=o.slice(9,-1).split(/, /),n=+t[0],s=+t[5],d=+t[12],c=+t[13];else if(o.startsWith("matrix("))t=o.slice(7,-1).split(/, /),n=+t[0],s=+t[3],d=+t[4],c=+t[5];else return new oe(r);const f=i.transformOrigin,y=r.x-d-(1-n)*parseFloat(f),h=r.y-c-(1-s)*parseFloat(f.slice(f.indexOf(" ")+1)),P=n?r.width/n:e.offsetWidth+1,k=s?r.height/s:e.offsetHeight+1;return new oe({x:y,y:h,width:P,height:k})}else return new oe(r)}function ut(e,r,i){if(typeof e.animate>"u")return{finished:Promise.resolve()};let o;try{o=e.animate(r,i)}catch{return{finished:Promise.resolve()}}return typeof o.finished>"u"&&(o.finished=new Promise(t=>{o.onfinish=()=>{t(o)}})),o}const dt="cubic-bezier(0.4, 0, 0.2, 1)",ct=Z({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...ue(),...we({transition:{component:Pe}})},"VCounter"),ft=ee()({name:"VCounter",functional:!0,props:ct(),setup(e,r){let{slots:i}=r;const o=I(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return te(()=>l(pe,{transition:e.transition},{default:()=>[X(l("div",{class:["v-counter",{"text-error":e.max&&!e.disabled&&parseFloat(e.value)>parseFloat(e.max)},e.class],style:e.style},[i.default?i.default({counter:o.value,max:e.max,value:e.value}):o.value]),[[Q,e.active]])]})),{}}}),vt=Z({floating:Boolean,...ue()},"VFieldLabel"),Y=ee()({name:"VFieldLabel",props:vt(),setup(e,r){let{slots:i}=r;return te(()=>l(at,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},i)),{}}}),mt=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],xe=Z({appendInnerIcon:ae,bgColor:String,clearable:Boolean,clearIcon:{type:ae,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:ae,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>mt.includes(e)},"onClick:clear":ie(),"onClick:appendInner":ie(),"onClick:prependInner":ie(),...ue(),...Fe(),...Re(),...Se()},"VField"),Ce=ee()({name:"VField",inheritAttrs:!1,props:{id:String,...it(),...xe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,r){let{attrs:i,emit:o,slots:t}=r;const{themeClasses:n}=Be(e),{loaderClasses:s}=Te(e),{focusClasses:d,isFocused:c,focus:f,blur:y}=be(e),{InputIcon:h}=ot(e),{roundedClasses:P}=$e(e),{rtlClasses:k}=De(),p=I(()=>e.dirty||e.active),b=I(()=>!e.singleLine&&!!(e.label||t.label)),M=Oe(),C=I(()=>e.id||`input-${M}`),j=I(()=>`${C.value}-messages`),N=F(),g=F(),u=F(),a=I(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:V,backgroundColorStyles:m}=Ee(Le(e,"bgColor")),{textColorClasses:R,textColorStyles:le}=Ae(I(()=>e.error||e.disabled?void 0:p.value&&c.value?e.color:e.baseColor));We(p,x=>{if(b.value){const _=N.value.$el,S=g.value.$el;requestAnimationFrame(()=>{const B=st(_),w=S.getBoundingClientRect(),K=w.x-B.x,L=w.y-B.y-(B.height/2-w.height/2),A=w.width/.75,W=Math.abs(A-B.width)>1?{maxWidth:qe(A)}:void 0,Ve=getComputedStyle(_),de=getComputedStyle(S),_e=parseFloat(Ve.transitionDuration)*1e3||150,Ie=parseFloat(de.getPropertyValue("--v-field-label-scale")),ke=de.getPropertyValue("color");_.style.visibility="visible",S.style.visibility="hidden",ut(_,{transform:`translate(${K}px, ${L}px) scale(${Ie})`,color:ke,...W},{duration:_e,easing:dt,direction:x?"normal":"reverse"}).finished.then(()=>{_.style.removeProperty("visibility"),S.style.removeProperty("visibility")})})}},{flush:"post"});const E=I(()=>({isActive:p,isFocused:c,controlRef:u,blur:y,focus:f}));function ne(x){x.target!==document.activeElement&&x.preventDefault()}function $(x){var _;x.key!=="Enter"&&x.key!==" "||(x.preventDefault(),x.stopPropagation(),(_=e["onClick:clear"])==null||_.call(e,new MouseEvent("click")))}return te(()=>{var K,L,A;const x=e.variant==="outlined",_=!!(t["prepend-inner"]||e.prependInnerIcon),S=!!(e.clearable||t.clear),B=!!(t["append-inner"]||e.appendInnerIcon||S),w=()=>t.label?t.label({...E.value,label:e.label,props:{for:C.value}}):e.label;return l("div",J({class:["v-field",{"v-field--active":p.value,"v-field--appended":B,"v-field--center-affix":e.centerAffix??!a.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":_,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!w(),[`v-field--variant-${e.variant}`]:!0},n.value,V.value,d.value,s.value,P.value,k.value,e.class],style:[m.value,e.style],onClick:ne},i),[l("div",{class:"v-field__overlay"},null),l(Ue,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:t.loader}),_&&l("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&l(h,{key:"prepend-icon",name:"prependInner"},null),(K=t["prepend-inner"])==null?void 0:K.call(t,E.value)]),l("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&b.value&&l(Y,{key:"floating-label",ref:g,class:[R.value],floating:!0,for:C.value,style:le.value},{default:()=>[w()]}),b.value&&l(Y,{key:"label",ref:N,for:C.value},{default:()=>[w()]}),(L=t.default)==null?void 0:L.call(t,{...E.value,props:{id:C.value,class:"v-field__input","aria-describedby":j.value},focus:f,blur:y})]),S&&l(Me,{key:"clear"},{default:()=>[X(l("div",{class:"v-field__clearable",onMousedown:W=>{W.preventDefault(),W.stopPropagation()}},[l(Ne,{defaults:{VIcon:{icon:e.clearIcon}}},{default:()=>[t.clear?t.clear({...E.value,props:{onKeydown:$,onFocus:f,onBlur:y,onClick:e["onClick:clear"]}}):l(h,{name:"clear",onKeydown:$,onFocus:f,onBlur:y},null)]})]),[[Q,e.dirty]])]}),B&&l("div",{key:"append",class:"v-field__append-inner"},[(A=t["append-inner"])==null?void 0:A.call(t,E.value),e.appendInnerIcon&&l(h,{key:"append-icon",name:"appendInner"},null)]),l("div",{class:["v-field__outline",R.value],style:le.value},[x&&l(O,null,[l("div",{class:"v-field__outline__start"},null),b.value&&l("div",{class:"v-field__outline__notch"},[l(Y,{ref:g,floating:!0,for:C.value},{default:()=>[w()]})]),l("div",{class:"v-field__outline__end"},null)]),a.value&&b.value&&l(Y,{ref:g,floating:!0,for:C.value},{default:()=>[w()]})])])}),{controlRef:u}}});function ht(e){const r=Object.keys(Ce.props).filter(i=>!Ke(i)&&i!=="class"&&i!=="style");return je(e,r)}const re=Symbol("Forwarded refs");function se(e,r){let i=e;for(;i;){const o=Reflect.getOwnPropertyDescriptor(i,r);if(o)return o;i=Object.getPrototypeOf(i)}}function gt(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e[re]=i,new Proxy(e,{get(t,n){if(Reflect.has(t,n))return Reflect.get(t,n);if(!(typeof n=="symbol"||n.startsWith("$")||n.startsWith("__"))){for(const s of i)if(s.value&&Reflect.has(s.value,n)){const d=Reflect.get(s.value,n);return typeof d=="function"?d.bind(s.value):d}}},has(t,n){if(Reflect.has(t,n))return!0;if(typeof n=="symbol"||n.startsWith("$")||n.startsWith("__"))return!1;for(const s of i)if(s.value&&Reflect.has(s.value,n))return!0;return!1},set(t,n,s){if(Reflect.has(t,n))return Reflect.set(t,n,s);if(typeof n=="symbol"||n.startsWith("$")||n.startsWith("__"))return!1;for(const d of i)if(d.value&&Reflect.has(d.value,n))return Reflect.set(d.value,n,s);return!1},getOwnPropertyDescriptor(t,n){var d;const s=Reflect.getOwnPropertyDescriptor(t,n);if(s)return s;if(!(typeof n=="symbol"||n.startsWith("$")||n.startsWith("__"))){for(const c of i){if(!c.value)continue;const f=se(c.value,n)??("_"in c.value?se((d=c.value._)==null?void 0:d.setupState,n):void 0);if(f)return f}for(const c of i){const f=c.value&&c.value[re];if(!f)continue;const y=f.slice();for(;y.length;){const h=y.shift(),P=se(h.value,n);if(P)return P;const k=h.value&&h.value[re];k&&y.push(...k)}}}}})}const yt=["color","file","time","date","datetime-local","week","month"],bt=Z({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...rt(),...xe()},"VTextField"),G=ee()({name:"VTextField",directives:{Intersect:ze},inheritAttrs:!1,props:bt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,r){let{attrs:i,emit:o,slots:t}=r;const n=He(e,"modelValue"),{isFocused:s,focus:d,blur:c}=be(e),f=I(()=>typeof e.counterValue=="function"?e.counterValue(n.value):typeof e.counterValue=="number"?e.counterValue:(n.value??"").toString().length),y=I(()=>{if(i.maxlength)return i.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),h=I(()=>["plain","underlined"].includes(e.variant));function P(a,V){var m,R;!e.autofocus||!a||(R=(m=V[0].target)==null?void 0:m.focus)==null||R.call(m)}const k=F(),p=F(),b=F(),M=I(()=>yt.includes(e.type)||e.persistentPlaceholder||s.value||e.active);function C(){var a;b.value!==document.activeElement&&((a=b.value)==null||a.focus()),s.value||d()}function j(a){o("mousedown:control",a),a.target!==b.value&&(C(),a.preventDefault())}function N(a){C(),o("click:control",a)}function g(a){a.stopPropagation(),C(),ce(()=>{n.value=null,Je(e["onClick:clear"],a)})}function u(a){var m;const V=a.target;if(n.value=V.value,(m=e.modelModifiers)!=null&&m.trim&&["text","search","password","tel","url"].includes(e.type)){const R=[V.selectionStart,V.selectionEnd];ce(()=>{V.selectionStart=R[0],V.selectionEnd=R[1]})}}return te(()=>{const a=!!(t.counter||e.counter!==!1&&e.counter!=null),V=!!(a||t.details),[m,R]=Xe(i),{modelValue:le,...E}=ge.filterProps(e),ne=ht(e);return l(ge,J({ref:k,modelValue:n.value,"onUpdate:modelValue":$=>n.value=$,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":h.value},e.class],style:e.style},m,E,{centerAffix:!h.value,focused:s.value}),{...t,default:$=>{let{id:x,isDisabled:_,isDirty:S,isReadonly:B,isValid:w}=$;return l(Ce,J({ref:p,onMousedown:j,onClick:N,"onClick:clear":g,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},ne,{id:x.value,active:M.value||S.value,dirty:S.value||e.dirty,disabled:_.value,focused:s.value,error:w.value===!1}),{...t,default:K=>{let{props:{class:L,...A}}=K;const W=X(l("input",J({ref:b,value:n.value,onInput:u,autofocus:e.autofocus,readonly:B.value,disabled:_.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:C,onBlur:c},A,R),null),[[Ye("intersect"),{handler:P},null,{once:!0}]]);return l(O,null,[e.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[e.prefix])]),t.default?l("div",{class:L,"data-no-activator":""},[t.default(),W]):Ge(W,{class:L}),e.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:V?$=>{var x;return l(O,null,[(x=t.details)==null?void 0:x.call(t,$),a&&l(O,null,[l("span",null,null),l(ft,{active:e.persistentCounter||s.value,value:f.value,max:y.value,disabled:e.disabled},t.counter)])])}:void 0})}),gt({},k,p,b)}}),xt={key:0},Ct={__name:"list",setup(e){const r=lt(),{addItem:i,editItem:o,delItem:t,cancelEditItem:n,confirmEditItem:s,delFinishedItem:d}=r,{items:c,finishedItems:f}=Qe(r),y=F(""),h=F(null),P=F([]),k=F(""),p=F(""),b={required:g=>!!g||"欄位必填",length:g=>g.length>=3||"必須三個字以上"},M=()=>{console.log(h.value.isValid),h.value.isValid&&(i(y.value),h.value.reset(),console.log(typeof c))},C=(g,u)=>{P.value[u].isValid&&s(g)},j=I(()=>Object.values(c.value).filter(g=>g.text.includes(k.value))),N=I(()=>Object.values(f.value).filter(g=>g.text.includes(p.value)));return(g,u)=>(D(),Ze(et,null,{default:T(()=>[l(nt,null,{default:T(()=>[l(H,{cols:"12"},{default:T(()=>[u[3]||(u[3]=v("h1",{class:"text-center"},"新增事項",-1)),l(G,{ref_key:"inputTextField",ref:h,modelValue:y.value,"onUpdate:modelValue":u[0]||(u[0]=a=>y.value=a),"append-icon":"mdi-plus",label:"新增事項",clearable:"",rules:[b.required,b.length],onKeydown:fe(M,["enter"]),"onClick:append":M},null,8,["modelValue","rules"])]),_:1}),l(H,{cols:"12"},{default:T(()=>[u[4]||(u[4]=v("h1",{class:"text-center"},"未完成",-1)),l(G,{modelValue:k.value,"onUpdate:modelValue":u[1]||(u[1]=a=>k.value=a),label:"過濾未完成事項"},null,8,["modelValue"])]),_:1}),l(H,{cols:"12"},{default:T(()=>[l(ye,null,{default:T(()=>[u[5]||(u[5]=v("thead",null,[v("tr",null,[v("th",null,"事項"),v("th",null,"操作")])],-1)),v("tbody",null,[(D(!0),U(O,null,ve(j.value,(a,V)=>(D(),U("tr",{key:a.id},[v("td",null,[X(l(G,{ref_for:!0,ref_key:"editTextField",ref:P,modelValue:a.model,"onUpdate:modelValue":m=>a.model=m,rules:[b.required,b.length],autofocus:"",onKeydown:fe(m=>C(a.id,V),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","onKeydown"]),[[Q,a.edit]]),X(v("span",null,me(a.text),513),[[Q,!a.edit]])]),v("td",null,[a.edit?(D(),U(O,{key:0},[l(z,{icon:"mdi-check",onClick:m=>C(a.id,V)},null,8,["onClick"]),l(z,{icon:"mdi-undo",onClick:m=>q(n)(a.id)},null,8,["onClick"])],64)):(D(),U(O,{key:1},[l(z,{icon:"mdi-pencil",onClick:m=>q(o)(a.id)},null,8,["onClick"]),l(z,{icon:"mdi-delete",onClick:m=>q(t)(a.id)},null,8,["onClick"])],64))])]))),128))])]),_:1})]),_:1}),l(H,{cols:"12"},{default:T(()=>[u[6]||(u[6]=v("h1",{class:"text-center"},"已完成",-1)),l(G,{modelValue:p.value,"onUpdate:modelValue":u[2]||(u[2]=a=>p.value=a),label:"過濾已完成事項"},null,8,["modelValue"])]),_:1}),l(H,{cols:"12"},{default:T(()=>[l(ye,null,{default:T(()=>[u[8]||(u[8]=v("thead",null,[v("tr",null,[v("th",null,"事項"),v("th",null,"操作")])],-1)),v("tbody",null,[q(f).length===0?(D(),U("tr",xt,u[7]||(u[7]=[v("td",{coolspan:"2"},"沒有項目",-1)]))):tt("",!0),(D(!0),U(O,null,ve(N.value,a=>(D(),U("tr",{key:a.id},[v("td",null,me(a.text),1),v("td",null,[l(z,{icon:"mdi-delete",onClick:V=>q(d)(a.id)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};typeof he=="function"&&he(Ct);export{Ct as default};
